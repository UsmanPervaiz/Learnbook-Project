
<div class="container">

  <% if @profile.user == current_user %>
  <h2 class="center"> <%= "Welcome, #{current_user.first_name} #{current_user.last_name}" %> </h2>
  <% else %>
  <h2 class="center"> <%= @profile.user.first_name %> <%= @profile.user.last_name %></h2>
  <% end %>

  <% if (flash[:request_notice].present?) %>
    <font color="green">  <%=flash[:request_notice]%> </font> <br> <br>
      <% flash[:request_notice].clear %>
  <%end%>

  <% if (flash[:unfriend_msg].present?) %>
    <font color="red">  <%=flash[:unfriend_msg]%> </font> <br> <br>
      <% flash[:unfriend_msg].clear %>
  <%end%>

  <% if (flash[:decline_notice].present?) %>
      <%=flash[:decline_notice]%> <br> <br>
      <% flash[:decline_notice].clear %>
  <%end%>



  <div class="add_friend">

  <% if friend_check %>
  <font color="green"> <%= "You are friends with #{@profile.user.first_name}"   %> </font> <br> <br>
  <%= button_to "Send Message", new_message_path(@profile), method: "get", class: "waves-effect waves-light blue lighten-3 btn" %> <br> <br>
  <%= button_to "Unfriend", delete_me_path, params: {id: @profile.id}, method: "delete", class: "waves-effect waves-light blue lighten-3 btn" %>
    <div class="first">
  <% end %>

  <% if current_user.id != @profile.user_id && !friend_check %>
    <%=form_tag friend_request_path do %>
    <%=submit_tag "Send Friend Request", class: "waves-effect waves-light blue lighten-3 btn"%> <br> <br>
    <% end %>
  <% end %>
  </div>
<div class="row">
    <div class="col s5 ">
      <% if current_user.profile == @profile %>
<%= button_to "Create New Post", new_post_path, method: "get", class: "waves-effect waves-light blue lighten-3 btn" %> <br>
  <% end %> <br>
  <% @profile.attributes.each do |name, value| %>
  <% if value != ''&& name != "id" && name != "user_id" %>
  <%= name %> : <%= value %> <br>
  <% end %>
  <% end %>  <br><br>
  </div>
  <div class="col s7">
  <% if @profile.user.posts.present? %>


  <% @profile.user.posts.reverse.each do |post| %>

    <div class="row">
          <div class="col s12">
            <div id="postcard", class="card hoverable grey lighten-5 z-depth-1 center">
              <div class="card-content black-text">
                <%= post.created_at %>
                <div class="card-title">
                <%= post.title %> </div>
                <p><%= post.content %>
                 <br> <br>

                <b> Comments </b> <br>
                <% post.comments.each do |comment| %>
              <b>  <%= comment.user.first_name %> </b>: <%= comment.content %> <br>
                <% end %> <br>
                <div class="row">
                  <div class="col s6">
                <font color="green"> Likes: <%= post.likes.count %> </font>
              </div>
                <div class="col s6">
                <font color="red"> Dislikes: <%= post.dislikes.count %> </font>
              </div>
              </div>
              </p>
              </div>
              <div class="card-action">
                <% if post.user == current_user %>
                <%= form_for @comment do |f| %>
                <%= f.text_field :content, placeholder: "type your comment here" %>
                <%= button_to create_comment_path, params: {post_id: post.id}, class: "inline-buttons waves-effect waves-light blue lighten-3 btn" do %>
                Comment <i class="material-icons left">comment</i>
                <% end %>
                <% end %> <br>
                <%= button_to edit_post_path, method:"get", params: {post_id: post.id}, class: "inline-buttons waves-effect waves-light blue lighten-3 btn" do %>
                Edit <i class="material-icons left">mode_edit</i>
                <% end %>

                <%= button_to delete_post_path, method: "delete", params: {post_id: post.id}, class: "inline-buttons waves-effect waves-light blue lighten-3 btn" do %>
                Delete <i class="material-icons left">delete</i>
                <% end %>



                  <% else %>

                  <%= button_to gen_like_path, params: {post_id: post.id}, class: "inline-buttons waves-effect waves-light blue lighten-3 btn" do %>
                  Like <i class="material-icons left">thumb_up</i>
                  <% end %>

                  <%= button_to gen_dislike_path, params: {post_id: post.id}, class: "inline-buttons waves-effect waves-light blue lighten-3 btn" do %>
                  Dislike <i class="material-icons left">thumb_down</i>
                  <% end %>

                  <%= form_for @comment do |f| %>
                  <%= f.text_field :content, placeholder: "type your comment here" %>
                  <%= button_to create_comment_path, params: {post_id: post.id}, class: "inline-buttons waves-effect waves-light blue lighten-3 btn" do %>
                  Comment <i class="material-icons left">comment</i>
                  <% end %>
                  <% end %> <br>


                <% end %>
              </div>


        </div>
        <% end %>
      <% end %>










  </div>
</div>
</div>
